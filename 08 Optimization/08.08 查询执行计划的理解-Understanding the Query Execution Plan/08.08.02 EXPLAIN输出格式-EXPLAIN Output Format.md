# 08.08.02 EXPLAIN Output Format

[TOC]

> The EXPLAIN statement provides information about how MySQL executes statements. EXPLAIN works with SELECT, DELETE, INSERT, REPLACE, and UPDATE statements.

EXPLAIN 提供了 MySQL 如何执行语句的信息。可以和 SELECT、DELETE、 INSERT、REPLACE 和 UPDATE 语句一起使用。

> EXPLAIN returns a row of information for each table used in the SELECT statement. It lists the tables in the output in the order that MySQL would read them while processing the statement. This means that MySQL reads a row from the first table, then finds a matching row in the second table, and then in the third table, and so on. When all tables are processed, MySQL outputs the selected columns and backtracks through the table list until a table is found for which there are more matching rows. The next row is read from this table and the process continues with the next table.

EXPLAIN 返回 SELECT 语句中每个表的一行信息。

为了在处理语句时，MySQL 能读取它们，它在输出中列出表。这就意味着 MySQL 从第一个表中读取一行，然后在第二个表中找到匹配的一行，之后在第三个表中，等等。

当所有的表都被处理了，MySQL 输出选定的列，并通过表列表回溯，直到找到一个有更多匹配行的表。从该表读取下一行，然后继续对下一个表进行处理。

> Note:MySQL Workbench has a Visual Explain capability that provides a visual representation of EXPLAIN output. See [Tutorial: Using Explain to Improve Query Performance](https://dev.mysql.com/doc/workbench/en/wb-tutorial-visual-explain-dbt3.html).

> 注意：MySQL 工作台有一个可视化的 EXPLAIN 功能，它提供了 EXPLAIN 输出的可视化表示。

## 1、EXPLAIN Output Columns

> This section describes the output columns produced by EXPLAIN. Later sections provide additional information about the type and Extra columns.

这部分描述 EXPLAIN 的输出列。后面的部分提供了对 type 和 Extra 列的额外信息。

> Each output row from EXPLAIN provides information about one table. Each row contains the values summarized in [Table 8.1, “EXPLAIN Output Columns”](https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#explain-output-column-table), and described in more detail following the table. Column names are shown in the table's first column; the second column provides the equivalent property name shown in the output when FORMAT=JSON is used.

EXPLAIN 输出的每一行都提供了关于一个表的信息。每行包含了 `Table 8.1, “EXPLAIN Output Columns”` 中总结的值，并在该表后面进行更详细的描述。

列名显示在表的第一列中；当使用 `FORMAT=JSON ` 时，第二列提供了使输出中显示的等效属性名。

>> Table 8.1 EXPLAIN Output Columns

Column | JSON Name | Meaning
---|:---|:---
id | select_id | The SELECT identifier
select_type | None | The SELECT type
table | table_name | The table for the output row
partitions | partitions | The matching partitions
type | access_type | The join type
possible_keys | possible_keys | The possible indexes to choose
key | key | The index actually chosen
key_len | key_length | The length of the chosen key
ref | ref | The columns compared to the index
rows | rows | Estimate of rows to be examined
filtered | filtered | Percentage of rows filtered by table condition
Extra | None | Additional information

Note:JSON properties which are NULL are not displayed in JSON-formatted EXPLAIN output.

- id (JSON name: select_id)

SELECT 标识符。这是查询中 SELECT 的序列号。如果行引用了其他行的 union 结果，则值可以为 NULL。

在本例中，表的列显示了一个类似于 `<unionM,N>` 的值，表示该行引用了 id 值为 M 和 N 的行的 union 结果。

> The SELECT identifier. This is the sequential number of the SELECT within the query. The value can be NULL if the row refers to the union result of other rows. In this case, the table column shows a value like <unionM,N> to indicate that the row refers to the union of the rows with id values of M and N.

- select_type (JSON name: none)

**SELECT 的类型**，可以是下表中的任一一个。

除非SELECT 的类型是 SIMPLE 或 PRIMARY ，否则 JSON-formatted EXPLAIN 将 SELECT 类型作为 query_block 的属性。表格中还显示了 JSON 名称(如果适用)。

> The type of SELECT, which can be any of those shown in the following table. A JSON-formatted EXPLAIN exposes the SELECT type as a property of a query_block, unless it is SIMPLE or PRIMARY. The JSON names (where applicable) are also shown in the table.

select_type Value | JSON Name | Meaning
---|:---|:---
SIMPLE | None | Simple SELECT (not using UNION or subqueries)
PRIMARY | None | Outermost SELECT
UNION | None | Second or later SELECT statement in a UNION
DEPENDENT UNION | dependent (true) | Second or later SELECT statement in a UNION, dependent on outer query
UNION RESULT | union_result | Result of a UNION.
SUBQUERY | None | First SELECT in subquery
DEPENDENT SUBQUERY | dependent (true) | First SELECT in subquery, dependent on outer query
DERIVED | None | Derived table
DEPENDENT DERIVED | dependent (true) | Derived table dependent on another table
MATERIALIZED | materialized_from_subquery | Materialized subquery
UNCACHEABLE SUBQUERY | cacheable (false) | A subquery for which the result cannot be cached and must be re-evaluated for each row of the outer query
UNCACHEABLE UNION | cacheable (false) | The second or later select in a UNION that belongs to an uncacheable subquery (see UNCACHEABLE SUBQUERY)

DEPENDENT 通常表示相关子查询的使用。

> DEPENDENT typically signifies the use of a correlated subquery. See [Section 13.2.11.7, “Correlated Subqueries”](https://dev.mysql.com/doc/refman/8.0/en/correlated-subqueries.html).

DEPENDENT SUBQUERY 不同于 UNCACHEABLE SUBQUERY 的计算。

  对于 DEPENDENT SUBQUERY，对外部环境的变量的每一组不同值，子查询只重新计算一次。

  对于 UNCACHEABLE SUBQUERY，对外部环境的每一行，子查询会重新计算。

> DEPENDENT SUBQUERY evaluation differs from UNCACHEABLE SUBQUERY evaluation. For DEPENDENT SUBQUERY, the subquery is re-evaluated only once for each set of different values of the variables from its outer context. For UNCACHEABLE SUBQUERY, the subquery is re-evaluated for each row of the outer context.

当你使用 EXPLAIN 指定了 `FORMAT=JSON` 时，输出没有直接等同于 select_type 的单一属性；query_block 属性对应于给定的 SELECT。

与刚才显示的，和大多数 SELECT 子查询类型等价的属性是可用的(例如对于 MATERIALIZED 的 being materialized_from_subquery)，并在适当的时候显示。

对于 SIMPLE 或 PRIMARY，没有对应的 JSON。

> When you specify FORMAT=JSON with EXPLAIN, the output has no single property directly equivalent to select_type; the query_block property corresponds to a given SELECT. Properties equivalent to most of the SELECT subquery types just shown are available (an example being materialized_from_subquery for MATERIALIZED), and are displayed when appropriate. There are no JSON equivalents for SIMPLE or PRIMARY.

非 SELECT 语句的 select_type 值展示受影响表的语句类型。例如，对 DELETE 语句，select_type 是 DELETE。

> The select_type value for non-SELECT statements displays the statement type for affected tables. For example, select_type is DELETE for DELETE statements.

- table (JSON name: table_name)

输出行引用的表的名字。可以是下列中的一个：

`<unionM,N>`：行引用的是 id 为 M 和 N 的行的 union。

`<derivedN>`：行引用的是 id 值为 N 的行的派生表结果。例如，派生表可能来自 FROM 子句中的子查询。

`<subqueryN>`：行引用的是 id 值为 N 的行的物化子查询的结果。

> The name of the table to which the row of output refers. This can also be one of the following values:

> <unionM,N>: The row refers to the union of the rows with id values of M and N.

> <derivedN>: The row refers to the derived table result for the row with an id value of N. A derived table may result, for example, from a subquery in the FROM clause.

> <subqueryN>: The row refers to the result of a materialized subquery for the row with an id value of N. See [Section 8.2.2.2, “Optimizing Subqueries with Materialization”](https://dev.mysql.com/doc/refman/8.0/en/subquery-materialization.html).

- partitions (JSON name: partitions)

查询将从哪些分区匹配记录。对于非分区表，该值为 NULL。

> The partitions from which records would be matched by the query. The value is NULL for nonpartitioned tables. See [Section 24.3.5, “Obtaining Information About Partitions”](https://dev.mysql.com/doc/refman/8.0/en/partitioning-info.html).

- type (JSON name: access_type)

join 的类型。

> The join type. For descriptions of the different types, see EXPLAIN [Join Types](https://dev.mysql.com/doc/refman/8.0/en/explain-output.html#explain-join-types).

- possible_keys (JSON name: possible_keys)

## 2、EXPLAIN Join Types

## 3、EXPLAIN Extra Information

## 4、EXPLAIN Output Interpretation